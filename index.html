<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry Dash - Technical Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<style>
    #authSection {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.9);
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
    }
    
    #userInfo {
        display: none;
        background: rgba(255, 255, 255, 0.9);
        padding: 10px;
        border-radius: 10px;
        margin-top: 10px;
        text-align: center;
    }
    
    .logout-btn {
        background: #ff4757;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 8px;
    }
</style>
<body>
    <div id="gameContainer">
        <div id="ui">
            <div id="score">–û—á–∫–∏: 0</div>
            <div id="highScore">–†–µ–∫–æ—Ä–¥: 0</div>
        </div>
        
        <canvas id="gameCanvas"></canvas>
        
        <div id="menu">
            <div id="startScreen">
                <h1>üéÆ Geometry Dash</h1>
                <p>–¢–µ—Ö–Ω–∏–∫—É–º Edition</p>
                <button id="startBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                <div id="controls">
                    <p>üí° –ö–ª–∏–∫–∞–π –¥–ª—è –ø—Ä—ã–∂–∫–∞!</p>
                </div>
            </div>
            
            <div id="gameOverScreen" class="hidden">
                <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
                <p id="finalScore">–û—á–∫–∏: 0</p>
                <button id="restartBtn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                <button id="shareBtn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</button>
            </div>
        </div>
    </div>
    <div id="authSection" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
        <script async 
                            src="https://telegram.org/js/telegram-widget.js?22" 
                            data-telegram-login="echo19_lnt_bot" 
                            data-size="large" 
                            data-auth-url="https://shuma4er.github.io/geometry-dash/auth.html"     
                            data-request-access="write"></script>
    </div>

    <script src="game.js"></script>
    
    <script type="text/javascript">
        function onTelegramAuth(user) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            localStorage.setItem('tg_user', JSON.stringify(user));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            alert('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + user.first_name + '! üéÆ\n–¢–≤–æ–π ID: ' + user.id);
            
            // –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
            try {
                Telegram.WebApp.sendData(JSON.stringify({
                    action: 'telegram_login',
                    user: user
                }));
            } catch (e) {
                console.log('WebApp not available:', e);
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
            document.getElementById('authSection').style.display = 'none';
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            const savedUser = localStorage.getItem('tg_user');
            if (savedUser) {
                document.getElementById('authSection').style.display = 'none';
            }
        });
    </script>
</body>
</html>
